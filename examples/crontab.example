# GitHub Merge Summary - Automated Daily Reports
#
# This example shows how to set up automated daily email reports:
# - Monday at 6am: 72 hour report (covers weekend merges)
# - Tuesday-Friday at 6am: 24 hour report
#
# To use this:
# 1. Edit the paths, credentials, and email addresses below
# 2. Run: crontab -e
# 3. Copy the relevant sections into your crontab
# 4. Verify with: crontab -l

# ============================================================================
# ENVIRONMENT VARIABLES
# ============================================================================
# Set these at the top of your crontab so they're available to all jobs

SHELL=/bin/bash
PATH=/usr/local/bin:/usr/bin:/bin

# Anthropic API key (required)
OPENAI_API_KEY=shopify-your-api-key-here

# SMTP credentials for email (required if using --email)
SMTP_USER=your.email@company.com
SMTP_PASSWORD=your-app-password-here
SMTP_FROM=your.email@company.com

# Optional: Customize SMTP server (defaults to Gmail)
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587

# ============================================================================
# SCHEDULED JOBS
# ============================================================================

# Monday at 6am - 72 hour report (covers weekend)
0 6 * * 1 cd /Users/michaelpratt/github/github-summary && ./run.sh --repos "shop/world" --labels "Slice: delivery,Slice: fulfillment,Slice: fulfillments,Slice: order-routing,Slice: delivery-strategies" --time-range 72h --email your.email@company.com >> /tmp/github_summary_monday.log 2>&1

# Tuesday-Friday at 6am - 24 hour report
0 6 * * 2-5 cd /Users/michaelpratt/github/github-summary && ./run.sh --repos "shop/world" --labels "Slice: delivery,Slice: fulfillment,Slice: fulfillments,Slice: order-routing,Slice: delivery-strategies" --time-range 24h --email your.email@company.com >> /tmp/github_summary_daily.log 2>&1

# ============================================================================
# ALTERNATIVE: Using a config file
# ============================================================================
# If you prefer to use a config file instead of command-line arguments:
#
# 1. Create team_changes_config.yaml in the repo directory
# 2. Set time_range: 24h or 72h as needed
# 3. Use these cron entries instead:

# Monday at 6am - edit config to use 72h
# 0 6 * * 1 cd /Users/michaelpratt/github/github-summary && ./run.sh --config team_changes_config_monday.yaml >> /tmp/github_summary_monday.log 2>&1

# Tuesday-Friday at 6am - edit config to use 24h
# 0 6 * * 2-5 cd /Users/michaelpratt/github/github-summary && ./run.sh --config team_changes_config_daily.yaml >> /tmp/github_summary_daily.log 2>&1

# ============================================================================
# CRON SCHEDULE FORMAT
# ============================================================================
# ┌───────────── minute (0 - 59)
# │ ┌───────────── hour (0 - 23)
# │ │ ┌───────────── day of month (1 - 31)
# │ │ │ ┌───────────── month (1 - 12)
# │ │ │ │ ┌───────────── day of week (0 - 6) (Sunday to Saturday)
# │ │ │ │ │
# * * * * * command to execute
#
# Examples:
# 0 6 * * *     - Every day at 6am
# 0 6 * * 1     - Every Monday at 6am
# 0 6 * * 1-5   - Monday through Friday at 6am
# 0 */6 * * *   - Every 6 hours
# 0 9,17 * * *  - At 9am and 5pm every day

# ============================================================================
# TROUBLESHOOTING
# ============================================================================
#
# 1. Check logs:
#    tail -f /tmp/github_summary_daily.log
#    tail -f /tmp/github_summary_monday.log
#
# 2. Test command manually first:
#    cd /Users/michaelpratt/github/github-summary
#    ./run.sh --repos "shop/world" --time-range 24h --email test@example.com
#
# 3. Verify cron job is installed:
#    crontab -l
#
# 4. Check if cron is running:
#    ps aux | grep cron
#
# 5. Verify timezone:
#    date
#
# 6. Email not arriving:
#    - Check spam folder
#    - Verify SMTP credentials in environment variables
#    - Check error logs
#    - See docs/EMAIL_SETUP.md for detailed troubleshooting
